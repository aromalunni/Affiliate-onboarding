<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Flarize ‚Äì Partner Onboarding</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --brand:#1E3A5F;--brand-light:#2C5282;--brand-dark:#0F2440;--brand-surface:#EBF4FF;
  --accent:#E8A838;--accent-light:#FBD38D;--accent-dark:#D4922A;
  --bg:#F7F8FB;--card:#FFFFFF;
  --border:#E2E5EA;--border-focus:#1E3A5F;
  --text:#111827;--text-2:#4B5563;--text-3:#9CA3AF;
  --red:#DC2626;--green:#059669;--r:10px;
}
html{scroll-behavior:smooth}
body{font-family:'Manrope',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.5;min-height:100vh;-webkit-font-smoothing:antialiased}

/* === SOLAR PANEL BG === */
.solar-bg{position:fixed;inset:0;z-index:0;pointer-events:none}
.solar-bg svg{position:absolute;inset:0;width:100%;height:100%}

/* === HEADER === */
.header{position:relative;z-index:1;background:linear-gradient(160deg,#0B1929 0%,#1E3A5F 45%,#2C5282 100%);padding:36px 20px 64px;text-align:center;overflow:hidden}
.header::after{content:'';position:absolute;bottom:-1px;left:0;right:0;height:24px;background:var(--bg);border-radius:24px 24px 0 0;z-index:3}
.hdr-grid{position:absolute;inset:0;z-index:0;opacity:0.07;background:repeating-linear-gradient(90deg,transparent 0,transparent 58px,rgba(255,255,255,0.5) 58px,rgba(255,255,255,0.5) 60px),repeating-linear-gradient(0deg,transparent 0,transparent 38px,rgba(255,255,255,0.5) 38px,rgba(255,255,255,0.5) 40px);pointer-events:none}
.hdr-sun{position:absolute;top:-50px;left:50%;transform:translateX(-50%);width:320px;height:320px;background:radial-gradient(circle,rgba(232,168,56,0.3) 0%,rgba(232,168,56,0.1) 30%,transparent 55%);border-radius:50%;pointer-events:none;z-index:0;animation:sunPulse 4s ease-in-out infinite}
@keyframes sunPulse{0%,100%{opacity:1;transform:translateX(-50%) scale(1)}50%{opacity:0.8;transform:translateX(-50%) scale(1.06)}}
.hdr-rays{position:absolute;top:-30px;left:50%;transform:translateX(-50%);width:380px;height:380px;pointer-events:none;z-index:0;animation:raysSpin 90s linear infinite}
@keyframes raysSpin{to{transform:translateX(-50%) rotate(360deg)}}
.hdr-scene{position:absolute;bottom:24px;left:0;right:0;height:80px;z-index:1;pointer-events:none;overflow:hidden}
.hdr-scene svg{width:100%;height:100%;opacity:0.12}
/* Wind turbine blade spin */
.turbine-blades{animation:bladeSpin 4s linear infinite;transform-origin:center}
.turbine-blades-2{animation:bladeSpin 5s linear infinite;transform-origin:center}
@keyframes bladeSpin{to{transform:rotate(360deg)}}
.header .inner{position:relative;z-index:2;animation:headerSlideIn .6s ease both}
@keyframes headerSlideIn{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.header .badge{display:inline-block;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--accent);background:rgba(232,168,56,0.15);padding:5px 16px;border-radius:20px;margin-bottom:14px;animation:badgePop .4s ease .2s both}
@keyframes badgePop{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:scale(1)}}
.header h1{font-size:24px;font-weight:800;color:#fff;margin-bottom:6px;letter-spacing:-0.3px}
.header p{font-size:13px;color:rgba(255,255,255,0.5);max-width:380px;margin:0 auto}

/* === LAYOUT === */
.layout{max-width:580px;margin:0 auto;padding:0 16px;position:relative;z-index:1}

/* === STEPPER === */
.stepper{display:flex;align-items:center;justify-content:center;gap:0;margin:-18px 0 24px;padding:14px 16px;position:relative;z-index:4;background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 2px 8px rgba(0,0,0,0.04);animation:stepperIn .5s ease .3s both}
@keyframes stepperIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.st{display:flex;align-items:center;gap:0}
.st-dot{width:30px;height:30px;border-radius:50%;display:grid;place-items:center;font-size:12px;font-weight:700;background:var(--border);color:var(--text-3);transition:all .35s cubic-bezier(.4,0,.2,1);flex-shrink:0;border:2px solid transparent}
.st-line{width:28px;height:2px;background:var(--border);transition:background .4s;flex-shrink:0}
.st.active .st-dot{background:var(--brand);color:#fff;border-color:var(--brand);box-shadow:0 0 0 4px rgba(30,58,95,0.12);transform:scale(1.1)}
.st.done .st-dot{background:var(--green);color:#fff;border-color:var(--green)}
.st-con{display:flex;align-items:center}
.st-label{font-size:8px;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;color:var(--text-3);margin-top:4px;text-align:center;transition:.3s}
.st.active .st-label{color:var(--brand)}.st.done .st-label{color:var(--green)}
.st-wrap{display:flex;flex-direction:column;align-items:center;gap:2px}

/* === CARD === */
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:28px 24px;box-shadow:0 2px 8px rgba(0,0,0,0.04);display:none;position:relative;overflow:hidden}
.card::after{content:'';position:absolute;top:0;right:0;width:80px;height:80px;opacity:0.5;pointer-events:none;border-radius:0 14px 0 0;background-image:url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='2' y='2' width='24' height='24' rx='2' fill='none' stroke='%231E3A5F' stroke-width='0.6' opacity='0.05'/%3E%3Crect x='28' y='2' width='24' height='24' rx='2' fill='none' stroke='%231E3A5F' stroke-width='0.6' opacity='0.05'/%3E%3Crect x='54' y='2' width='24' height='24' rx='2' fill='none' stroke='%231E3A5F' stroke-width='0.6' opacity='0.05'/%3E%3Crect x='2' y='28' width='24' height='24' rx='2' fill='none' stroke='%231E3A5F' stroke-width='0.6' opacity='0.03'/%3E%3Crect x='28' y='28' width='24' height='24' rx='2' fill='none' stroke='%231E3A5F' stroke-width='0.6' opacity='0.03'/%3E%3C/svg%3E")}
.card.active{display:block;animation:cardIn .35s ease}
@keyframes cardIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
.card-title{font-size:17px;font-weight:700;color:var(--text);margin-bottom:4px}
.card-sub{font-size:12px;color:var(--text-3);margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid var(--border)}

/* === FORM === */
.grid{display:flex;flex-direction:column;gap:14px}.row{display:grid;grid-template-columns:1fr;gap:14px}.row-2{grid-template-columns:1fr 1fr}
.fld label{display:block;font-size:12px;font-weight:600;color:var(--text-2);margin-bottom:4px}.fld label .req{color:var(--red);margin-left:2px}
input,select,textarea{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:var(--r);font-family:'Manrope',system-ui,sans-serif;font-size:14px;color:var(--text);background:var(--card);transition:border .2s,box-shadow .2s,transform .15s;outline:none;-webkit-appearance:none}
input:focus,select:focus,textarea:focus{border-color:var(--border-focus);box-shadow:0 0 0 3px rgba(30,58,95,0.08);transform:translateY(-1px)}
input::placeholder,textarea::placeholder{color:var(--text-3);font-size:13px}
select{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239CA3AF' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center;padding-right:32px}
textarea{resize:vertical;min-height:72px}
.file-box{border:1px dashed var(--border);border-radius:var(--r);padding:12px 14px;display:flex;align-items:center;gap:10px;cursor:pointer;transition:all .2s;position:relative;overflow:hidden;background:var(--bg)}
.file-box:hover{border-color:var(--brand);background:var(--brand-surface);transform:translateY(-1px)}
.file-box input[type="file"]{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;border:none;padding:0}
.file-box-icon{width:32px;height:32px;border-radius:8px;background:var(--brand-surface);display:grid;place-items:center;flex-shrink:0}
.file-box-icon svg{width:16px;height:16px;color:var(--brand)}
.file-box-text{font-size:12px;color:var(--text-3);min-width:0}.file-box-text strong{color:var(--brand);font-weight:600}
.file-box-name{font-size:11px;color:var(--text-2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;margin-top:1px}
.choices{display:grid;grid-template-columns:1fr 1fr;gap:6px}.ch{position:relative}
.ch input{position:absolute;opacity:0;width:0;height:0;pointer-events:none;border:none;padding:0}
.ch span{display:flex;align-items:center;justify-content:center;padding:10px 8px;border:1px solid var(--border);border-radius:var(--r);font-size:13px;font-weight:500;color:var(--text-2);cursor:pointer;transition:all .2s;text-align:center}
.ch span:hover{border-color:var(--brand);transform:translateY(-1px)}
.ch input:checked+span{border-color:var(--brand);background:var(--brand-surface);color:var(--brand);font-weight:600;transform:scale(1.02)}
.ch-inline{display:flex;gap:6px;flex-wrap:wrap}.ch-inline .ch span{padding:9px 16px}
.err{font-size:11px;color:var(--red);margin-top:3px;display:none}.has-err input,.has-err select{border-color:var(--red)}.has-err .err{display:block}

/* === BUTTONS === */
.actions{display:flex;gap:10px;margin-top:24px;padding-top:18px;border-top:1px solid var(--border)}
.btn{flex:1;padding:12px 16px;border-radius:var(--r);font-family:'Manrope',system-ui,sans-serif;font-size:14px;font-weight:600;cursor:pointer;border:none;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:6px;position:relative;overflow:hidden}
.btn-ghost{background:transparent;color:var(--text-2);border:1px solid var(--border);flex:0 0 auto;padding:12px 20px}
.btn-ghost:hover{background:var(--bg);border-color:var(--text-3);transform:translateY(-1px)}
.btn-primary{background:linear-gradient(135deg,var(--brand) 0%,var(--brand-light) 100%);color:#fff;box-shadow:0 2px 8px rgba(30,58,95,0.25)}
.btn-primary:hover{box-shadow:0 4px 16px rgba(30,58,95,0.3);transform:translateY(-2px)}
.btn-primary:active{transform:translateY(0) scale(0.98)}
.btn-primary:disabled{opacity:.5;cursor:not-allowed;transform:none}
/* Ripple */
.btn-primary::after{content:'';position:absolute;inset:0;background:radial-gradient(circle at var(--x,50%) var(--y,50%),rgba(255,255,255,0.3) 0%,transparent 60%);opacity:0;transition:opacity .3s}
.btn-primary:active::after{opacity:1}
.spinner{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .6s linear infinite;display:none}
@keyframes spin{to{transform:rotate(360deg)}}

/* === SUCCESS === */
.success{display:none;text-align:center;padding:40px 20px 20px}
.success.show{display:block;animation:cardIn .4s ease}
.success-icon{width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,#059669,#10B981);display:grid;place-items:center;margin:0 auto 18px;animation:pop .5s ease .15s both;box-shadow:0 4px 20px rgba(5,150,105,0.3)}
.success-icon svg{width:28px;height:28px;color:#fff}
@keyframes pop{from{transform:scale(0) rotate(-20deg)}60%{transform:scale(1.1) rotate(5deg)}to{transform:scale(1) rotate(0)}}
.success h2{font-size:22px;font-weight:800;color:var(--text);margin-bottom:6px}
.success>p{font-size:13px;color:var(--text-2);margin-bottom:4px}
.success-ref{display:inline-block;margin-top:12px;padding:10px 20px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r);font-size:14px;font-weight:700;color:var(--brand);font-family:'Manrope',monospace;letter-spacing:1px}
/* Contact section */
.success-contact{margin-top:28px;padding-top:24px;border-top:1px solid var(--border)}
.success-contact h3{font-size:13px;font-weight:700;color:var(--text-2);text-transform:uppercase;letter-spacing:0.8px;margin-bottom:14px}
.contact-grid{display:flex;flex-wrap:wrap;gap:8px;justify-content:center}
.contact-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 18px;border-radius:var(--r);font-size:13px;font-weight:600;text-decoration:none;transition:all .2s;border:1px solid var(--border);color:var(--text)}
.contact-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.08)}
.contact-btn svg{width:18px;height:18px;flex-shrink:0}
.contact-btn.wa{background:#25D366;color:#fff;border-color:#25D366}
.contact-btn.wa:hover{background:#1EBE5A}
.contact-btn.ph{background:var(--brand-surface);color:var(--brand);border-color:var(--brand-surface)}
.contact-btn.web{background:var(--brand);color:#fff;border-color:var(--brand)}
.contact-btn.web:hover{background:var(--brand-light)}
.contact-btn.mail{background:#F3F4F6;color:var(--text);border-color:#E5E7EB}

/* === CONFETTI === */
.confetti-container{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;overflow:hidden}
.confetti{position:absolute;width:8px;height:8px;border-radius:2px;top:-10px;animation:confettiFall 3s ease-in forwards}
@keyframes confettiFall{0%{transform:translateY(0) rotate(0deg) scale(1);opacity:1}80%{opacity:1}100%{transform:translateY(100vh) rotate(720deg) scale(0.3);opacity:0}}

/* === RESPONSIVE === */
@media(min-width:640px){.layout{padding:0 24px}.header{padding:44px 24px 68px}.header h1{font-size:28px}.header p{font-size:14px;max-width:420px}.card{padding:32px 28px}.row-2{grid-template-columns:1fr 1fr}}
@media(max-width:399px){.row-2{grid-template-columns:1fr}.st-label{display:none}.st-dot{width:32px;height:32px;font-size:13px}.st-line{width:18px}.card{padding:22px 18px}.header h1{font-size:20px}.header{padding:28px 16px 52px}.choices{grid-template-columns:1fr}input,select,textarea{font-size:16px}.contact-grid{flex-direction:column}.contact-btn{justify-content:center}}
@media(min-width:400px) and (max-width:639px){.row-2{grid-template-columns:1fr 1fr}}
@media(hover:none){input,select,textarea{font-size:16px}}
</style>
</head>
<body>

<!-- SOLAR PANEL BG -->
<div class="solar-bg">
<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
<defs><pattern id="sc" width="60" height="40" patternUnits="userSpaceOnUse">
<rect x="1" y="1" width="28" height="18" rx="1.5" fill="none" stroke="#1E3A5F" stroke-width="0.7" opacity="0.045"/>
<rect x="31" y="1" width="28" height="18" rx="1.5" fill="none" stroke="#1E3A5F" stroke-width="0.7" opacity="0.045"/>
<rect x="1" y="21" width="28" height="18" rx="1.5" fill="none" stroke="#1E3A5F" stroke-width="0.7" opacity="0.045"/>
<rect x="31" y="21" width="28" height="18" rx="1.5" fill="none" stroke="#1E3A5F" stroke-width="0.7" opacity="0.045"/>
<line x1="15" y1="1" x2="15" y2="19" stroke="#1E3A5F" stroke-width="0.3" opacity="0.03"/>
<line x1="45" y1="1" x2="45" y2="19" stroke="#1E3A5F" stroke-width="0.3" opacity="0.03"/>
<line x1="15" y1="21" x2="15" y2="39" stroke="#1E3A5F" stroke-width="0.3" opacity="0.03"/>
<line x1="45" y1="21" x2="45" y2="39" stroke="#1E3A5F" stroke-width="0.3" opacity="0.03"/>
</pattern></defs>
<rect width="100%" height="100%" fill="url(#sc)"/>
</svg>
</div>

<!-- HEADER -->
<div class="header">
<div class="hdr-grid"></div>
<div class="hdr-sun"></div>
<svg class="hdr-rays" viewBox="0 0 380 380" fill="none">
  <g stroke="#E8A838" stroke-linecap="round">
    <line x1="190" y1="10" x2="190" y2="70" stroke-width="2" opacity="0.45"/>
    <line x1="190" y1="310" x2="190" y2="370" stroke-width="2" opacity="0.25"/>
    <line x1="10" y1="190" x2="70" y2="190" stroke-width="2" opacity="0.35"/>
    <line x1="310" y1="190" x2="370" y2="190" stroke-width="2" opacity="0.35"/>
    <line x1="55" y1="55" x2="97" y2="97" stroke-width="1.5" opacity="0.3"/>
    <line x1="283" y1="283" x2="325" y2="325" stroke-width="1.5" opacity="0.2"/>
    <line x1="55" y1="325" x2="97" y2="283" stroke-width="1.5" opacity="0.25"/>
    <line x1="283" y1="97" x2="325" y2="55" stroke-width="1.5" opacity="0.25"/>
    <line x1="120" y1="18" x2="138" y2="72" stroke-width="1" opacity="0.2"/>
    <line x1="260" y1="18" x2="242" y2="72" stroke-width="1" opacity="0.2"/>
    <line x1="18" y1="120" x2="72" y2="138" stroke-width="1" opacity="0.15"/>
    <line x1="362" y1="120" x2="308" y2="138" stroke-width="1" opacity="0.15"/>
  </g>
  <circle cx="190" cy="190" r="44" fill="none" stroke="#E8A838" stroke-width="1" opacity="0.12"/>
  <circle cx="190" cy="190" r="26" fill="none" stroke="#E8A838" stroke-width="0.7" opacity="0.08"/>
  <circle cx="190" cy="190" r="14" fill="#E8A838" opacity="0.05"/>
</svg>
<div class="hdr-scene">
<svg viewBox="0 0 800 80" fill="none" preserveAspectRatio="xMidYMax slice">
  <path d="M0 55 Q100 30 200 45 Q300 25 400 40 Q500 20 600 38 Q700 28 800 42 L800 80 L0 80Z" fill="white" opacity="0.06"/>
  <path d="M0 65 Q150 45 300 55 Q450 40 600 52 Q750 42 800 50 L800 80 L0 80Z" fill="white" opacity="0.04"/>
  <!-- Wind turbine 1 -->
  <line x1="120" y1="18" x2="120" y2="58" stroke="white" stroke-width="1.5"/>
  <g transform="translate(120,18)"><g class="turbine-blades"><line x1="0" y1="0" x2="0" y2="-22" stroke="white" stroke-width="1"/><line x1="0" y1="0" x2="0" y2="-22" stroke="white" stroke-width="1" transform="rotate(120)"/><line x1="0" y1="0" x2="0" y2="-22" stroke="white" stroke-width="1" transform="rotate(240)"/></g><circle r="2" fill="white"/></g>
  <!-- Wind turbine 2 -->
  <line x1="680" y1="25" x2="680" y2="52" stroke="white" stroke-width="1"/>
  <g transform="translate(680,25)"><g class="turbine-blades-2"><line x1="0" y1="0" x2="0" y2="-16" stroke="white" stroke-width="0.8" transform="rotate(15)"/><line x1="0" y1="0" x2="0" y2="-16" stroke="white" stroke-width="0.8" transform="rotate(135)"/><line x1="0" y1="0" x2="0" y2="-16" stroke="white" stroke-width="0.8" transform="rotate(255)"/></g><circle r="1.5" fill="white"/></g>
  <!-- Solar panels left -->
  <g transform="translate(280,48) skewX(-15)"><rect x="0" y="0" width="16" height="10" rx="1" fill="none" stroke="white" stroke-width="1"/><line x1="8" y1="0" x2="8" y2="10" stroke="white" stroke-width="0.5"/><line x1="0" y1="5" x2="16" y2="5" stroke="white" stroke-width="0.5"/></g>
  <g transform="translate(298,48) skewX(-15)"><rect x="0" y="0" width="16" height="10" rx="1" fill="none" stroke="white" stroke-width="1"/><line x1="8" y1="0" x2="8" y2="10" stroke="white" stroke-width="0.5"/><line x1="0" y1="5" x2="16" y2="5" stroke="white" stroke-width="0.5"/></g>
  <g transform="translate(316,48) skewX(-15)"><rect x="0" y="0" width="16" height="10" rx="1" fill="none" stroke="white" stroke-width="1"/><line x1="8" y1="0" x2="8" y2="10" stroke="white" stroke-width="0.5"/><line x1="0" y1="5" x2="16" y2="5" stroke="white" stroke-width="0.5"/></g>
  <!-- Solar panels right -->
  <g transform="translate(480,45) skewX(-15)"><rect x="0" y="0" width="16" height="10" rx="1" fill="none" stroke="white" stroke-width="1"/><line x1="8" y1="0" x2="8" y2="10" stroke="white" stroke-width="0.5"/><line x1="0" y1="5" x2="16" y2="5" stroke="white" stroke-width="0.5"/></g>
  <g transform="translate(498,45) skewX(-15)"><rect x="0" y="0" width="16" height="10" rx="1" fill="none" stroke="white" stroke-width="1"/><line x1="8" y1="0" x2="8" y2="10" stroke="white" stroke-width="0.5"/><line x1="0" y1="5" x2="16" y2="5" stroke="white" stroke-width="0.5"/></g>
  <g transform="translate(516,45) skewX(-15)"><rect x="0" y="0" width="16" height="10" rx="1" fill="none" stroke="white" stroke-width="1"/><line x1="8" y1="0" x2="8" y2="10" stroke="white" stroke-width="0.5"/><line x1="0" y1="5" x2="16" y2="5" stroke="white" stroke-width="0.5"/></g>
  <!-- House with rooftop solar -->
  <rect x="395" y="48" width="22" height="16" fill="none" stroke="white" stroke-width="1"/>
  <path d="M392 48 L406 38 L420 48" fill="none" stroke="white" stroke-width="1"/>
  <rect x="396" y="40" width="18" height="7" rx="0.5" fill="none" stroke="#E8A838" stroke-width="0.8" opacity="0.6"/>
  <line x1="405" y1="40" x2="405" y2="47" stroke="#E8A838" stroke-width="0.4" opacity="0.5"/>
  <!-- Leaves -->
  <g transform="translate(750,40)" opacity="0.7"><path d="M0 10 Q4 0 14 0 Q14 10 4 14Z" fill="none" stroke="white" stroke-width="0.8"/><path d="M2 12 Q6 6 12 2" fill="none" stroke="white" stroke-width="0.5"/></g>
  <g transform="translate(40,42)" opacity="0.5"><path d="M0 10 Q4 0 14 0 Q14 10 4 14Z" fill="none" stroke="white" stroke-width="0.8"/><path d="M2 12 Q6 6 12 2" fill="none" stroke="white" stroke-width="0.5"/></g>
</svg>
</div>
<div class="inner">
  <div class="badge">‚ö° Partner Program</div>
  <h1>Become a Flarize Partner</h1>
  <p>Apply to join Kerala's largest solar referral network. Earn commissions on every successful installation.</p>
</div>
</div>

<div class="layout" id="mainLayout">
<div class="stepper">
  <div class="st active" data-s="1"><div class="st-wrap"><span class="st-dot">1</span><span class="st-label">Details</span></div></div>
  <div class="st-con"><div class="st-line"></div></div>
  <div class="st" data-s="2"><div class="st-wrap"><span class="st-dot">2</span><span class="st-label">Address</span></div></div>
  <div class="st-con"><div class="st-line"></div></div>
  <div class="st" data-s="3"><div class="st-wrap"><span class="st-dot">3</span><span class="st-label">Business</span></div></div>
  <div class="st-con"><div class="st-line"></div></div>
  <div class="st" data-s="4"><div class="st-wrap"><span class="st-dot">4</span><span class="st-label">Bank</span></div></div>
  <div class="st-con"><div class="st-line"></div></div>
  <div class="st" data-s="5"><div class="st-wrap"><span class="st-dot">5</span><span class="st-label">KYC</span></div></div>
</div>
<form id="F" novalidate>
<!-- 1 -->
<div class="card active" data-c="1"><div class="card-title">Personal Details</div><div class="card-sub">Tell us about yourself</div><div class="grid"><div class="row row-2"><div class="fld"><label>Full Name <span class="req">*</span></label><input type="text" name="full_name" placeholder="As per government ID" required><div class="err">Required</div></div><div class="fld"><label>Mobile Number <span class="req">*</span></label><input type="tel" name="mobile" placeholder="10-digit number" maxlength="10" pattern="[0-9]{10}" required><div class="err">Enter valid number</div></div></div><div class="row row-2"><div class="fld"><label>Email Address <span class="req">*</span></label><input type="email" name="email" placeholder="you@example.com" required><div class="err">Enter valid email</div></div><div class="fld"><label>Date of Birth <span class="req">*</span></label><input type="date" name="dob" required><div class="err">Required</div></div></div><div class="fld"><label>Gender <span class="req">*</span></label><div class="ch-inline"><label class="ch"><input type="radio" name="gender" value="Male" required><span>Male</span></label><label class="ch"><input type="radio" name="gender" value="Female"><span>Female</span></label><label class="ch"><input type="radio" name="gender" value="Other"><span>Other</span></label></div></div><div class="fld"><label>Profile Photo</label><div class="file-box"><div class="file-box-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/></svg></div><div class="file-box-text"><strong>Click to upload</strong> or drag and drop<span class="file-box-name">PNG, JPG up to 5MB</span></div><input type="file" name="profile_photo" accept="image/*" onchange="ufn(this)"></div></div></div><div class="actions" style="justify-content:flex-end"><button type="button" class="btn btn-primary" onclick="nxt()">Continue ‚Üí</button></div></div>
<!-- 2 -->
<div class="card" data-c="2"><div class="card-title">Address Information</div><div class="card-sub">Your residential address</div><div class="grid"><div class="fld"><label>Address Line 1 <span class="req">*</span></label><input type="text" name="address_1" placeholder="House / Building, Street" required><div class="err">Required</div></div><div class="fld"><label>Address Line 2</label><input type="text" name="address_2" placeholder="Locality, Landmark (optional)"></div><div class="row row-2"><div class="fld"><label>City / Town <span class="req">*</span></label><input type="text" name="city" placeholder="Enter city" required><div class="err">Required</div></div><div class="fld"><label>District <span class="req">*</span></label><select name="district" required><option value="">Select district</option><option>Alappuzha</option><option>Ernakulam</option><option>Idukki</option><option>Kannur</option><option>Kasaragod</option><option>Kollam</option><option>Kottayam</option><option>Kozhikode</option><option>Malappuram</option><option>Palakkad</option><option>Pathanamthitta</option><option>Thiruvananthapuram</option><option>Thrissur</option><option>Wayanad</option></select><div class="err">Required</div></div></div><div class="row row-2"><div class="fld"><label>State</label><input type="text" name="state" value="Kerala" readonly style="background:var(--bg);color:var(--text-3)"></div><div class="fld"><label>Pincode <span class="req">*</span></label><input type="text" name="pincode" placeholder="6 digits" maxlength="6" pattern="[0-9]{6}" required><div class="err">Enter valid pincode</div></div></div><div class="fld"><label>Google Maps Link</label><input type="url" name="location_link" placeholder="https://maps.google.com/..."></div></div><div class="actions"><button type="button" class="btn btn-ghost" onclick="prv()">‚Üê Back</button><button type="button" class="btn btn-primary" onclick="nxt()">Continue ‚Üí</button></div></div>
<!-- 3 -->
<div class="card" data-c="3"><div class="card-title">Business Information</div><div class="card-sub">Your professional background and capacity</div><div class="grid"><div class="fld"><label>Affiliate Type <span class="req">*</span></label><div class="choices"><label class="ch"><input type="radio" name="affiliate_type" value="Individual" required><span>Individual</span></label><label class="ch"><input type="radio" name="affiliate_type" value="Freelancer"><span>Freelancer</span></label><label class="ch"><input type="radio" name="affiliate_type" value="Contractor"><span>Contractor</span></label><label class="ch"><input type="radio" name="affiliate_type" value="Dealer / Agency"><span>Dealer / Agency</span></label></div></div><div class="row row-2"><div class="fld"><label>Company Name</label><input type="text" name="company_name" placeholder="If applicable"></div><div class="fld"><label>Solar Experience <span class="req">*</span></label><select name="experience" required><option value="">Select</option><option value="0">No Experience</option><option value="1-2">1‚Äì2 Years</option><option value="3-5">3‚Äì5 Years</option><option value="5-10">5‚Äì10 Years</option><option value="10+">10+ Years</option></select><div class="err">Required</div></div></div><div class="fld"><label>Service Locations <span class="req">*</span></label><textarea name="service_locations" placeholder="List the areas, panchayats, or districts you can cover" required></textarea><div class="err">Required</div></div><div class="row row-2"><div class="fld"><label>Existing Customers? <span class="req">*</span></label><div class="ch-inline"><label class="ch"><input type="radio" name="existing_customers" value="Yes" required><span>Yes</span></label><label class="ch"><input type="radio" name="existing_customers" value="No"><span>No</span></label></div></div><div class="fld"><label>Expected Leads / Month <span class="req">*</span></label><select name="expected_leads" required><option value="">Select</option><option>1‚Äì5</option><option>5‚Äì10</option><option>10‚Äì20</option><option>20‚Äì50</option><option>50+</option></select><div class="err">Required</div></div></div></div><div class="actions"><button type="button" class="btn btn-ghost" onclick="prv()">‚Üê Back</button><button type="button" class="btn btn-primary" onclick="nxt()">Continue ‚Üí</button></div></div>
<!-- 4 -->
<div class="card" data-c="4"><div class="card-title">Bank Account Details</div><div class="card-sub">For commission payouts via NEFT/IMPS</div><div class="grid"><div class="row row-2"><div class="fld"><label>Account Holder Name <span class="req">*</span></label><input type="text" name="account_holder" placeholder="As per bank records" required><div class="err">Required</div></div><div class="fld"><label>Bank Name <span class="req">*</span></label><input type="text" name="bank_name" placeholder="e.g. State Bank of India" required><div class="err">Required</div></div></div><div class="row row-2"><div class="fld"><label>Account Number <span class="req">*</span></label><input type="text" name="account_number" placeholder="Enter account number" required><div class="err">Required</div></div><div class="fld"><label>IFSC Code <span class="req">*</span></label><input type="text" name="ifsc" placeholder="e.g. SBIN0001234" maxlength="11" style="text-transform:uppercase" required><div class="err">Required</div></div></div><div class="fld"><label>Branch Name</label><input type="text" name="branch" placeholder="Branch name (optional)"></div><div class="fld"><label>Cancelled Cheque / Passbook <span class="req">*</span></label><div class="file-box"><div class="file-box-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/></svg></div><div class="file-box-text"><strong>Click to upload</strong><span class="file-box-name">PDF, JPG or PNG</span></div><input type="file" name="cancelled_cheque" accept="image/*,.pdf" required onchange="ufn(this)"></div><div class="err">Required</div></div></div><div class="actions"><button type="button" class="btn btn-ghost" onclick="prv()">‚Üê Back</button><button type="button" class="btn btn-primary" onclick="nxt()">Continue ‚Üí</button></div></div>
<!-- 5 -->
<div class="card" data-c="5"><div class="card-title">Identity Verification</div><div class="card-sub">Upload KYC documents for compliance</div><div class="grid"><div class="row row-2"><div class="fld"><label>Aadhaar Number <span class="req">*</span></label><input type="text" name="aadhaar_number" placeholder="12-digit number" maxlength="12" pattern="[0-9]{12}" required><div class="err">Enter valid Aadhaar</div></div><div class="fld"><label>PAN Number</label><input type="text" name="pan_number" placeholder="e.g. ABCDE1234F" maxlength="10" style="text-transform:uppercase" pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}"><div class="err">Enter valid PAN</div></div></div><div class="row row-2"><div class="fld"><label>Aadhaar Card (Front & Back) <span class="req">*</span></label><div class="file-box"><div class="file-box-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/></svg></div><div class="file-box-text"><strong>Upload</strong><span class="file-box-name">Both sides</span></div><input type="file" name="aadhaar_upload" accept="image/*,.pdf" multiple required onchange="ufn(this)"></div><div class="err">Required</div></div><div class="fld"><label>PAN Card</label><div class="file-box"><div class="file-box-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/></svg></div><div class="file-box-text"><strong>Upload</strong><span class="file-box-name">Front side (optional)</span></div><input type="file" name="pan_upload" accept="image/*,.pdf" onchange="ufn(this)"></div></div></div><div class="fld"><label>Additional ID (Optional)</label><div class="file-box"><div class="file-box-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/></svg></div><div class="file-box-text"><strong>Upload</strong><span class="file-box-name">Driving License or Voter ID</span></div><input type="file" name="additional_id" accept="image/*,.pdf" onchange="ufn(this)"></div></div></div><div class="actions"><button type="button" class="btn btn-ghost" onclick="prv()">‚Üê Back</button><button type="submit" class="btn btn-primary" id="subBtn"><span id="subTxt">Submit Application ‚úì</span><span class="spinner" id="subSpin"></span></button></div></div>
</form>

<!-- SUCCESS -->
<div class="success" id="successBox">
  <div class="success-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg></div>
  <h2>üéâ Application Received!</h2>
  <p>Thank you for applying to the Flarize Partner Program.</p>
  <p style="color:var(--text);font-weight:600;margin-top:8px">Our team will review and reach out within 24‚Äì48 hours.</p>

  <!-- TRACKING SLIP -->
  <div id="trackingSlip" style="margin-top:20px;background:var(--card);border:2px solid var(--border);border-radius:12px;padding:24px;text-align:left;max-width:400px;margin-left:auto;margin-right:auto">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;padding-bottom:12px;border-bottom:2px dashed var(--border)">
      <div style="font-size:14px;font-weight:800;color:var(--brand)">‚ö° FLARIZE</div>
      <div style="font-size:10px;font-weight:600;color:var(--text-3);text-transform:uppercase;letter-spacing:1px">Tracking Slip</div>
    </div>
    <div style="display:grid;gap:8px;font-size:13px">
      <div><span style="color:var(--text-3);font-weight:600">Applicant:</span> <span id="slipName" style="font-weight:700;color:var(--text)"></span></div>
      <div><span style="color:var(--text-3);font-weight:600">Reference ID:</span> <span id="slipRef" style="font-family:monospace;font-weight:800;color:var(--brand);font-size:15px;letter-spacing:1px"></span></div>
      <div><span style="color:var(--text-3);font-weight:600">Date:</span> <span id="slipDate" style="color:var(--text)"></span></div>
      <div><span style="color:var(--text-3);font-weight:600">Status:</span> <span style="background:#FEF3C7;color:#D97706;padding:2px 10px;border-radius:12px;font-size:11px;font-weight:700">UNDER REVIEW</span></div>
    </div>
    <div style="margin-top:14px;padding-top:12px;border-top:2px dashed var(--border);font-size:11px;color:var(--text-3);text-align:center">
      Save this slip to track your application at<br><strong style="color:var(--brand)">partner.flarize.com</strong> ‚Üí Check Application Status
    </div>
  </div>

  <!-- Download button -->
  <button onclick="downloadSlip()" style="margin-top:14px;padding:10px 24px;background:var(--brand);color:#fff;border:none;border-radius:var(--r);font-size:13px;font-weight:700;cursor:pointer;font-family:'Manrope',sans-serif;display:inline-flex;align-items:center;gap:6px;transition:all .2s;box-shadow:0 2px 8px rgba(30,58,95,0.2)">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/></svg>
    Download Tracking Slip
  </button>

  <div class="success-contact" style="margin-top:24px">
    <h3>Get in Touch</h3>
    <div class="contact-grid">
      <a href="https://wa.me/919876543210?text=Hi%20Flarize%2C%20I%20just%20submitted%20my%20partner%20application." class="contact-btn wa" target="_blank">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
        WhatsApp
      </a>
      <a href="tel:+919876543210" class="contact-btn ph">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg>
        Call Us
      </a>
      <a href="https://flarize.com" class="contact-btn web" target="_blank">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>
        Website
      </a>
      <a href="mailto:partners@flarize.com" class="contact-btn mail">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
        Email
      </a>
    </div>
  </div>
</div>

<!-- STATUS CHECKER (accessible via link below form) -->
<div id="statusChecker" class="layout" style="display:none;padding-top:24px;padding-bottom:48px">
  <div class="card active" style="display:block">
    <div class="card-title">Check Application Status</div>
    <div class="card-sub">Enter your reference ID to view your application status</div>
    <div class="grid">
      <div class="fld">
        <label>Reference ID <span class="req">*</span></label>
        <input type="text" id="statusRefId" placeholder="e.g. FLZ-M5X8K2P" style="text-transform:uppercase;font-family:'Manrope',monospace;letter-spacing:1px">
      </div>
      <button type="button" class="btn btn-primary" onclick="checkStatus()" id="statusBtn" style="flex:none;width:100%">
        <span id="statusBtnTxt">Check Status</span>
        <span class="spinner" id="statusSpin"></span>
      </button>
    </div>
    <div id="statusResult" style="display:none;margin-top:20px;padding:16px;border-radius:var(--r);animation:cardIn .3s ease">
    </div>
    <div style="text-align:center;margin-top:16px">
      <a href="#" onclick="hideStatus();return false" style="font-size:13px;color:var(--brand);text-decoration:none;font-weight:600">‚Üê Back to Application Form</a>
    </div>
  </div>
</div>

<!-- Status link at bottom of form -->
<div class="layout" id="statusLink" style="text-align:center;padding:16px;padding-bottom:48px">
  <a href="#" onclick="showStatus();return false" style="font-size:13px;color:var(--text-3);text-decoration:none;font-weight:500;transition:color .2s">Already applied? <span style="color:var(--brand);font-weight:600;text-decoration:underline">Check Application Status</span></a>
</div>

<script>
const GOOGLE_SCRIPT_URL='https://script.google.com/macros/s/AKfycbyodXULxZ5PC4316pSU5380_U79_Ibh75Pyya35zZ_bh-Xs-2GUiU0pXlqP_5fKqqsI4Q/exec';
let cur=1;const tot=5;

function ufn(i){
  const t=i.closest('.file-box').querySelector('.file-box-name');
  const box=i.closest('.file-box');
  t.textContent=i.files.length===1?i.files[0].name:i.files.length>1?i.files.length+' files selected':t.textContent;
  if(i.files.length){box.style.borderColor='var(--green)';box.style.background='#F0FFF4'}
}

function prog(){
  document.querySelectorAll('.st').forEach(s=>{
    const n=+s.dataset.s;s.classList.remove('active','done');
    if(n<cur)s.classList.add('done');else if(n===cur)s.classList.add('active');
  });
  document.querySelectorAll('.st-con .st-line').forEach((l,i)=>{l.style.background=i<cur-1?'var(--green)':'var(--border)'});
}

function go(n){
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('active'));
  document.querySelector(`[data-c="${n}"]`).classList.add('active');
  cur=n;prog();
  window.scrollTo({top:100,behavior:'smooth'});
}

function val(){
  const c=document.querySelector(`[data-c="${cur}"]`);let ok=true;
  c.querySelectorAll('[required]').forEach(f=>{
    const p=f.closest('.fld');
    if(f.type==='radio'){if(!c.querySelector(`input[name="${f.name}"]:checked`))ok=false;return}
    if(p)p.classList.remove('has-err');
    if(!f.value||!f.checkValidity()){ok=false;if(p)p.classList.add('has-err')}
  });
  if(!ok){/* shake card */const card=document.querySelector(`[data-c="${cur}"]`);card.style.animation='none';card.offsetHeight;card.style.animation='shake .4s ease'}
  return ok;
}

function nxt(){if(val()&&cur<tot)go(cur+1)}
function prv(){if(cur>1)go(cur-1)}
function toB64(f){return new Promise((r,j)=>{const rd=new FileReader();rd.onload=()=>r({name:f.name,type:f.type,data:rd.result.split(',')[1]});rd.onerror=j;rd.readAsDataURL(f)})}

/* Confetti burst */
function confetti(){
  const c=document.createElement('div');c.className='confetti-container';document.body.appendChild(c);
  const colors=['#E8A838','#1E3A5F','#059669','#DC2626','#7C3AED','#F59E0B','#10B981','#3B82F6'];
  for(let i=0;i<60;i++){
    const p=document.createElement('div');p.className='confetti';
    p.style.left=Math.random()*100+'%';
    p.style.background=colors[Math.floor(Math.random()*colors.length)];
    p.style.width=(Math.random()*6+4)+'px';
    p.style.height=(Math.random()*6+4)+'px';
    p.style.animationDelay=Math.random()*1.5+'s';
    p.style.animationDuration=(Math.random()*2+2)+'s';
    if(Math.random()>.5)p.style.borderRadius='50%';
    c.appendChild(p);
  }
  setTimeout(()=>c.remove(),5000);
}

/* Button ripple */
document.addEventListener('click',function(e){
  const btn=e.target.closest('.btn-primary');
  if(btn){const r=btn.getBoundingClientRect();btn.style.setProperty('--x',(e.clientX-r.left)+'px');btn.style.setProperty('--y',(e.clientY-r.top)+'px')}
});

document.getElementById('F').addEventListener('submit',async function(e){
  e.preventDefault();if(!val())return;
  const btn=document.getElementById('subBtn'),txt=document.getElementById('subTxt'),spin=document.getElementById('subSpin');
  btn.disabled=true;txt.textContent='Processing files...';spin.style.display='block';
  const fd=new FormData(this),data={};
  for(const[k,v]of fd.entries()){if(!(v instanceof File&&v.size>0))data[k]=v}
  /* Parallel file conversion ‚Äî all files at once */
  const fileFields=['profile_photo','cancelled_cheque','aadhaar_upload','pan_upload','additional_id'];
  const filePromises=[];
  for(const nm of fileFields){
    const inp=this.querySelector(`[name="${nm}"]`);
    if(inp?.files.length){
      for(const f of inp.files){if(f.size>0)filePromises.push(toB64(f).then(r=>({field:nm,file:r})))}
    }
  }
  try{
    txt.textContent='Uploading...';
    const results=await Promise.all(filePromises);
    for(const r of results){const k=r.field+'_files';if(!data[k])data[k]=[];data[k].push(r.file)}
    data.reference_id='FLZ-'+Date.now().toString(36).toUpperCase();
    data.submitted_at=new Date().toISOString();
    txt.textContent='Submitting...';
    await fetch(GOOGLE_SCRIPT_URL,{method:'POST',mode:'no-cors',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
    this.style.display='none';
    document.getElementById('slipName').textContent=data.full_name||'‚Äî';
    document.getElementById('slipRef').textContent=data.reference_id;
    document.getElementById('slipDate').textContent=new Date().toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric',hour:'2-digit',minute:'2-digit'});
    window._slipData={name:data.full_name||'',ref:data.reference_id,date:new Date().toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'})};
    document.getElementById('successBox').classList.add('show');
    document.querySelectorAll('.st').forEach(s=>s.classList.add('done'));
    document.querySelectorAll('.st-con .st-line').forEach(l=>l.style.background='var(--green)');
    confetti();
  }catch(err){alert('Something went wrong. Please try again.');btn.disabled=false;txt.textContent='Submit Application ‚úì';spin.style.display='none'}
});

prog();

/* Status checker */
function showStatus(){
  document.getElementById('mainLayout').style.display='none';
  document.getElementById('statusLink').style.display='none';
  document.querySelector('.header').style.display='none';
  document.getElementById('statusChecker').style.display='block';
  window.scrollTo({top:0,behavior:'smooth'});
}
function hideStatus(){
  document.getElementById('mainLayout').style.display='';
  document.getElementById('statusLink').style.display='';
  document.querySelector('.header').style.display='';
  document.getElementById('statusChecker').style.display='none';
  window.scrollTo({top:0,behavior:'smooth'});
}
async function checkStatus(){
  const refId=document.getElementById('statusRefId').value.trim().toUpperCase();
  if(!refId){alert('Please enter your reference ID');return}
  const btn=document.getElementById('statusBtn'),txt=document.getElementById('statusBtnTxt'),spin=document.getElementById('statusSpin'),res=document.getElementById('statusResult');
  btn.disabled=true;txt.textContent='Checking...';spin.style.display='block';res.style.display='none';
  try{
    const r=await fetch(GOOGLE_SCRIPT_URL+'?action=status&ref='+encodeURIComponent(refId));
    const d=await r.json();
    if(d.found){
      const st=d.status||'Under Review';
      const stColor=st.toLowerCase().includes('approved')?'var(--green)':st.toLowerCase().includes('reject')?'var(--red)':'var(--accent-dark)';
      res.innerHTML=`
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
          <div style="width:10px;height:10px;border-radius:50%;background:${stColor};flex-shrink:0"></div>
          <div style="font-size:15px;font-weight:700;color:var(--text)">${st}</div>
        </div>
        <div style="display:grid;gap:8px;font-size:13px;color:var(--text-2)">
          <div><strong>Name:</strong> ${d.name||'‚Äî'}</div>
          <div><strong>Reference:</strong> <span style="font-family:monospace;letter-spacing:0.5px">${refId}</span></div>
          <div><strong>Submitted:</strong> ${d.date||'‚Äî'}</div>
          ${d.remarks?`<div style="margin-top:4px;padding:10px;background:var(--bg);border-radius:6px;border-left:3px solid ${stColor}"><strong>Remarks:</strong> ${d.remarks}</div>`:''}
        </div>`;
      res.style.display='block';res.style.background='var(--bg)';res.style.border='1px solid var(--border)';
    }else{
      res.innerHTML='<div style="text-align:center;color:var(--text-3);font-size:13px;padding:8px">No application found with this reference ID. Please check and try again.</div>';
      res.style.display='block';res.style.background='#FEF2F2';res.style.border='1px solid #FECACA';
    }
  }catch(err){
    res.innerHTML='<div style="text-align:center;color:var(--text-3);font-size:13px;padding:8px">Unable to check status right now. Please try again later.</div>';
    res.style.display='block';res.style.background='#FEF2F2';res.style.border='1px solid #FECACA';
  }
  btn.disabled=false;txt.textContent='Check Status';spin.style.display='none';
}

/* Download tracking slip as image */
function downloadSlip(){
  const s=window._slipData;if(!s)return;
  const c=document.createElement('canvas');c.width=600;c.height=380;
  const x=c.getContext('2d');
  /* Background */
  x.fillStyle='#FFFFFF';x.fillRect(0,0,600,380);
  x.strokeStyle='#1E3A5F';x.lineWidth=3;x.strokeRect(8,8,584,364);
  /* Header */
  x.fillStyle='#1E3A5F';x.fillRect(8,8,584,50);
  x.fillStyle='#FFFFFF';x.font='bold 18px Manrope,sans-serif';x.fillText('‚ö° FLARIZE TECHNOLOGIES',24,40);
  x.font='11px Manrope,sans-serif';x.fillStyle='#E8A838';x.fillText('PARTNER APPLICATION TRACKING SLIP',370,40);
  /* Dashed line */
  x.setLineDash([6,4]);x.strokeStyle='#E2E5EA';x.lineWidth=1;
  x.beginPath();x.moveTo(24,72);x.lineTo(576,72);x.stroke();x.setLineDash([]);
  /* Content */
  x.fillStyle='#9CA3AF';x.font='600 12px Manrope,sans-serif';
  x.fillText('APPLICANT NAME',24,100);
  x.fillStyle='#111827';x.font='bold 16px Manrope,sans-serif';
  x.fillText(s.name,24,122);
  
  x.fillStyle='#9CA3AF';x.font='600 12px Manrope,sans-serif';
  x.fillText('REFERENCE ID',24,160);
  x.fillStyle='#1E3A5F';x.font='bold 22px monospace';
  x.fillText(s.ref,24,186);
  
  x.fillStyle='#9CA3AF';x.font='600 12px Manrope,sans-serif';
  x.fillText('SUBMISSION DATE',24,220);
  x.fillStyle='#111827';x.font='500 14px Manrope,sans-serif';
  x.fillText(s.date,24,240);
  
  x.fillStyle='#9CA3AF';x.font='600 12px Manrope,sans-serif';
  x.fillText('STATUS',300,160);
  x.fillStyle='#FEF3C7';x.fillRect(300,168,120,26);
  x.fillStyle='#D97706';x.font='bold 12px Manrope,sans-serif';
  x.fillText('UNDER REVIEW',314,186);
  
  /* Footer dashed line */
  x.setLineDash([6,4]);x.strokeStyle='#E2E5EA';
  x.beginPath();x.moveTo(24,280);x.lineTo(576,280);x.stroke();x.setLineDash([]);
  
  /* Footer */
  x.fillStyle='#9CA3AF';x.font='11px Manrope,sans-serif';
  x.textAlign='center';
  x.fillText('Save this slip. Use your Reference ID to check status at:',300,310);
  x.fillStyle='#1E3A5F';x.font='bold 13px Manrope,sans-serif';
  x.fillText('partner.flarize.com ‚Üí Check Application Status',300,330);
  x.fillStyle='#9CA3AF';x.font='10px Manrope,sans-serif';
  x.fillText('¬© Flarize Technologies Pvt Ltd | Kerala\'s Solar Booking Platform',300,358);
  
  /* Download */
  const link=document.createElement('a');
  link.download='Flarize_Tracking_'+s.ref+'.png';
  link.href=c.toDataURL('image/png');
  link.click();
}

/* Shake animation (added via JS) */
const shakeStyle=document.createElement('style');
shakeStyle.textContent='@keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-6px)}40%{transform:translateX(6px)}60%{transform:translateX(-4px)}80%{transform:translateX(4px)}}';
document.head.appendChild(shakeStyle);
</script>
</body>
</html>
